<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Othello</title>
    <meta name="author" content="Nan Jiang">
</head>
<body>
    <div id="container"></div>
    <script>
        let map = [
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 2, 0, 0, 0],
            [0, 0, 0, 2, 1, 0, 0, 0],
            [1, 2, 2, 0, 2, 2, 2, 1],
            [0, 0, 0, 2, 0, 0, 0, 0],
            [0, 0, 0, 1, 0, 0, 0, 0]
        ];
        let container = document.getElementById("container");
        render();
        function render() {
            container.innerHTML="";
            for (let i = 0; i < 8; i++){
                for (let j = 0; j < 8; j++){
                    let cell = document.createElement("div");
                    cell.addEventListener("click", (event) => {
                        let canmove=false;
                        let [x,y] = [j,i];
                        console.log(1,x);
                        while( --x >=0){
                            console.log(2,x);
                            if(map[y][x] === 2){
                                canmove = true;
                            }
                            else if (map[y][x] === 1) {
                                break;
                            }
                            else if (map[y][x] === 0) {
                                canmove = false;
                                break;
                            }
                        };
                        console.log(canmove);
                        if (x<0)
                            canmove = false;
                        // console.log(x);
                        while (canmove === true && x++ < j){
                            map[y][x]=1;
                            // console.log("x=",x);
                            // console.log(map);
                        };
                        render();
                    });
                    container.appendChild(cell);
                    cell.style="vertical-align:middle;margin:1px;width:30px;height:30px;background-color:lightgreen;display:inline-block";
                    if (map[i][j]===1){
                        let zi = document.createElement("div");
                        zi.style = "border: black solid 1px;margin: 2px;border-radius:12px;width:24px;height:24px;background-color:black";
                        cell.appendChild(zi);
                    }
                    else if  (map[i][j] === 2) {
                        let zi = document.createElement("div");
                        zi.style = "border: black solid 1px;margin: 2px;border-radius:12px;width:24px;height:24px;background-color:white";
                        cell.appendChild(zi);
                    }
                }
                container.appendChild(document.createElement("br"));
            }
        }    
    </script>
    
</body>
</html>